library(mice)
# This takes care of changing path names depending on whether working on ultra or not.
# If working on ultra, set ultra==True
ultra <- FALSE
if (ultra == TRUE){
root <- '/home/u034/'
} else {
root <- 'Y:/'
}
# catVars is a list of variables that are categorical.
catVars <- c('sex', 'ethnicity', 'infect_cmtrt', 'chrincard', 'chronicpul_mhyn', 'asthma_mhyn', 'renal_mhyn', 'modliv',
'diabetescom_mhyn', 'diabetes_mhyn', 'dementia_mhyn', 'malignantneo_mhyn', 'obesity_mhyn' )
# freqTab prints frequency tables for the imputations and the real data against each other for the categorical variables
# to allow comparison.
freqTab <- function(Imputation){
for (var in catVars){
real <- table(data[var])
nlevels <- length(real)
freqTable <- data.frame( matrix(ncol = Imputation$m +1, nrow = nlevels) )
colnames(freqTable) <- append( seq(1, Imputation$m, 1), 'real')
rownames(freqTable) <- seq(0, nlevels-1, 1)
for (m in 1:Imputation$m ){
tab <- table(as.data.frame(Imputation$imp[var])[,m] )
freqTable[, m] <- tab / sum(tab)
freqTable[, 'real'] <- table(data[var]) / sum( table(data[var]) )
}
print(var)
print(freqTable)
}
}
freqTab <- function(Imputation){
for (var in catVars){
real <- table(data[var])
nlevels <- length(real)
freqTable <- data.frame( matrix(ncol = Imputation$m +1, nrow = nlevels) )
colnames(freqTable) <- append( seq(1, Imputation$m, 1), 'real')
rownames(freqTable) <- seq(0, nlevels-1, 1)
for (m in 1:Imputation$m ){
tab <- table(as.data.frame(Imputation$imp[var])[,m] )
freqTable[, m] <- tab / sum(tab)
freqTable[, 'real'] <- table(data[var]) / sum( table(data[var]) )
}
print(var)
print(freqTable)
}
}
load(file = paste(root, 'shared/data/wp-5/clinical_imputation/mids.RData', sep='') )
densityplot(Imputation)
library(mice)
# This takes care of changing path names depending on whether working on ultra or not.
# If working on ultra, set ultra==True
ultra <- FALSE
if (ultra == TRUE){
root <- '/home/u034/'
} else {
root <- 'Y:/'
}
library(dplyr)
library(ggplot2)
library(mice)
library(data.table)
# This takes care of changing path names depending on whether working on ultra or not.
# If working on ultra, set ultra==True
ultra <- TRUE
if (ultra == TRUE){
root <- '/home/u034/'
} else {
root <- 'Y:/'
}
data <- fread( paste( root, 'shared/data/wp-5/clinical_imputation/cleanData.csv', sep=''), data.table=FALSE)
# If working on ultra, set ultra==True
ultra <- FALSE
if (ultra == TRUE){
root <- '/home/u034/'
} else {
root <- 'Y:/'
}
data <- fread( paste( root, 'shared/data/wp-5/clinical_imputation/cleanData.csv', sep=''), data.table=FALSE)
hist(data['dailt_plt_lborres'])
hist(data['daily_plt_lborres'])
data[catVars] <- lapply(data[catVars], factor )
catVars <- c('sex', 'ethnicity', 'infect_cmtrt', 'chrincard', 'chronicpul_mhyn', 'asthma_mhyn', 'renal_mhyn', 'modliv',
'diabetescom_mhyn', 'diabetes_mhyn', 'dementia_mhyn', 'malignantneo_mhyn', 'obesity_mhyn' )
data[catVars] <- lapply(data[catVars], factor )
sapply(data, class)
hist(data['daily_plt_lborres'])
data['daily_plt_lborres']
typeof[1, 'daily_plt_lborres']
typeof(data[1, 'daily_plt_lborres'])
typeof(data[1, 'age'])
hist(data['age'])
sapply(data, class)
hist(data['temp_vsorres'])
colMax(data['daily_plt_lborres'])
max(data['daily_plt_lborres'], na.rm = TRUE)
data <- fread( paste( root, 'shared/data/wp-5/clinical_imputation/cleanData.csv'), data.table=FALSE)
data <- fread( paste( root, 'shared/data/wp-5/clinical_imputation/cleanData.csv'), data.table=FALSE))
data <- fread( paste( root, 'shared/data/wp-5/clinical_imputation/cleanData.csv'), data.table=FALSE )
data <- fread( paste( root, 'shared/data/wp-5/clinical_imputation/cleanData.csv', sep=''), data.table=FALSE)
View(data)
var <- 'daily_plt_lborres'
data[var > 1000]
data[var][data[var > 1000]]
data[data[var > 1000]][var]
data[var]
data[data[var > 1000]]
data[data[var] >  1000]]
data[data[var] >  1000]
data[var][data[var] >  1000]
data[var][data[var] >  1000 & !is.na(data[var]) ]
library(dplyr)
library(ggplot2)
library(mice)
library(data.table)
# This takes care of changing path names depending on whether working on ultra or not.
# If working on ultra, set ultra==True
ultra <- FALSE
if (ultra == TRUE){
root <- '/home/u034/'
} else {
root <- 'Y:/'
}
data <- fread( paste( root, 'shared/data/wp-5/clinical_imputation/cleanData.csv', sep=''), data.table=FALSE)
var <- 'daily_plt_lborres'
data[var][data[var] >  1000 & !is.na(data[var]) ]
